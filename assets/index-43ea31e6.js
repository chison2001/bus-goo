import{_ as te}from"./AppCombobox.vue_vue_type_script_setup_true_lang-c1d9498f.js";import{_ as ae}from"./AppDateTimePicker.vue_vue_type_style_index_0_lang-fd8a12a0.js";import{_ as le}from"./AppSelect.vue_vue_type_script_setup_true_lang-263668d4.js";import{$ as L}from"./api-a75dc8d8.js";import{V as oe,p as ie,a as ne,c as se}from"./VPagination-f6ec3866.js";import{u as re}from"./useApi-dfef132a.js";import{V as me,a as h}from"./VRow-c532c0b3.js";import{V as C,b as ue}from"./VCard-61c770c5.js";import{V as de}from"./VSpacer-ef1f5864.js";import{d as ce,r as n,d3 as E,a4 as z,w as M,m as o,o as j,c as q,b as a,e as l,b8 as d,n as T,ah as D,t as s,v as u,_ as F,q as H,a as pe}from"./index-3fd149be.js";import{V as O}from"./VDivider-28142714.js";import{V as fe}from"./VChip-259eb5bf.js";import{V as K}from"./VCardText-e03872ea.js";import"./VInput-f0b53b48.js";import"./VImg-358e4210.js";import"./filter-63c6ab32.js";import"./VTextField-2ce7eec1.js";import"./VField-51408b73.js";import"./forwardRefs-6ea3df5c.js";import"./VList-f267fd1b.js";import"./VAvatar-f2d95c46.js";import"./VOverlay-159aff9b.js";import"./lazy-b75e2264.js";import"./VMenu-277f5fe7.js";import"./VCheckboxBtn-cc8088ff.js";import"./VSelectionControl-28aa5ef1.js";import"./VTable-435e4ee8.js";import"./index-f220d054.js";const ve={key:0},ge={class:"me-3 d-flex gap-3 align-center"},_e={class:"d-flex align-center flex-wrap gap-4"},Ve={class:"d-flex align-center justify-sm-space-between justify-center flex-wrap gap-3 pa-5 pt-3"},be={class:"text-sm text-disabled mb-0"},ye={key:1},Qe=ce({__name:"index",async setup(he){let c,_;const V=n(""),b=n(""),f=n(),v=n(),S=n(),B=n(),r=n(10),m=n(1),P=n(),U=n(),x=n([]),Y=i=>{var t,p;m.value=i.page,P.value=(t=i.sortBy[0])==null?void 0:t.order,U.value=(p=i.sortBy[0])==null?void 0:p.key},G=[{title:"Code",key:"code"},{title:"Tuyến đường",key:"routeDescription"},{title:"Tên xe",key:"busName"},{title:"Loại xe",key:"busType"},{title:"Thời gian chạy",key:"timeTransfer"},{title:"Thời gian khởi hành",key:"timeStarted"},{title:"Trạng thái",key:"status"},{title:"Hành động",key:"actions",sortable:!1}],J=[{title:"Active",value:1},{title:"Inactive",value:0}],{data:$,execute:Q}=([c,_]=E(()=>re(se("api/timetable/find",{query:{status:V,departureDate:b,fromId:S,toId:B,itemPerPage:r,page:m.value-1,sortBy:P,orderBy:U}}))),c=await c,_(),c),I=z(()=>$.value.valueReponse.data.content),y=z(()=>$.value.valueReponse.data.totalElements),N=i=>{const t=i;if(t===1)return{color:"success",value:"active"};if(t===0)return{color:"secondary",value:"inactive"}};M(f,()=>{var i;return S.value=(i=f.value)==null?void 0:i.value}),M(v,()=>{var i;return B.value=(i=v.value)==null?void 0:i.value});const W=async i=>{await L(`api/timetable/delete/${i}`,{method:"DELETE"}),Q()};async function X(i,t){const k=(await L("api/region/find",{method:"POST",data:{parentId:i,regionStructureId:t}})).data.valueReponse.data;x.value=k.map(g=>({value:g.id,title:g.fullName}))}[c,_]=E(()=>X(null,1)),await c,_();function Z(i){return new Date(`2000-01-01T${i}`).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}function ee(i){const t=new Date(i);return`${t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})} ${t.toLocaleDateString()}`}return(i,t)=>{const p=le,k=ae,g=te,R=pe("IconBtn");return o(I)?(j(),q("section",ve,[a(C,{title:"Bộ lọc",class:"mb-6"},{default:l(()=>[a(o(K),null,{default:l(()=>[a(me,null,{default:l(()=>[a(h,{cols:"12",md:"3"},{default:l(()=>[a(p,{modelValue:o(V),"onUpdate:modelValue":t[0]||(t[0]=e=>d(V)?V.value=e:null),label:"Chọn trạng thái",placeholder:"Chọn trạng thái",clearable:"","clear-icon":"tabler-x",items:J},null,8,["modelValue"])]),_:1}),a(h,{cols:"12",md:"3"},{default:l(()=>[a(k,{modelValue:o(b),"onUpdate:modelValue":t[1]||(t[1]=e=>d(b)?b.value=e:null),label:"Chọn thời gian khởi hành",config:{enableTime:!0,dateFormat:"Y-m-dTH:i"},clearable:"","clear-icon":"tabler-x"},null,8,["modelValue"])]),_:1}),a(h,{cols:"12",md:"3"},{default:l(()=>[a(g,{modelValue:o(f),"onUpdate:modelValue":t[2]||(t[2]=e=>d(f)?f.value=e:null),items:o(x),label:"Điểm khởi hành"},null,8,["modelValue","items"])]),_:1}),a(h,{cols:"12",md:"3"},{default:l(()=>[a(g,{modelValue:o(v),"onUpdate:modelValue":t[3]||(t[3]=e=>d(v)?v.value=e:null),items:o(x),label:"Điểm đến"},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1})]),_:1}),a(C,{id:"invoice-list"},{default:l(()=>[a(o(K),{class:"d-flex align-center flex-wrap gap-4"},{default:l(()=>[T("div",ge,[a(p,{"model-value":o(r),items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"Tất cả"}],style:{"inline-size":"8rem"},"onUpdate:modelValue":t[4]||(t[4]=e=>r.value=parseInt(e,10))},null,8,["model-value"])]),a(de),T("div",_e,[a(D,{"prepend-icon":"tabler-plus",to:"add"},{default:l(()=>[s(" Thêm lịch trình ")]),_:1})])]),_:1}),a(O),a(o(oe),{"items-per-page":o(r),"onUpdate:itemsPerPage":t[6]||(t[6]=e=>d(r)?r.value=e:null),page:o(m),"onUpdate:page":t[7]||(t[7]=e=>d(m)?m.value=e:null),"items-length":o(y),items:o(I),headers:G,class:"text-no-wrap","onClick:row":t[8]||(t[8]=e=>console.log(e)),"onUpdate:options":Y},{"item.code":l(({item:e})=>[s(u(e.code),1)]),"item.routeDescription":l(({item:e})=>[s(u(e.routeDescription),1)]),"item.busName":l(({item:e})=>[s(u(e.busName),1)]),"item.busType":l(({item:e})=>[s(u(e.busType),1)]),"item.timeTransfer":l(({item:e})=>[s(u(Z(e.timeTransfer)),1)]),"item.timeStarted":l(({item:e})=>[s(u(ee(e.timeStarted)),1)]),"item.status":l(({item:e})=>{var w;return[a(fe,{color:(w=N(e.status))==null?void 0:w.color,size:"small",label:"",class:"text-capitalize"},{default:l(()=>{var A;return[s(u((A=N(e.status))==null?void 0:A.value),1)]}),_:2},1032,["color"])]}),"item.actions":l(({item:e})=>[a(R,{onClick:w=>W(e.id)},{default:l(()=>[a(F,{icon:"tabler-trash"})]),_:2},1032,["onClick"]),a(R,{to:{name:"promotion-edit-id",params:{id:e.id}}},{default:l(()=>[a(F,{icon:"tabler-edit"})]),_:2},1032,["to"])]),bottom:l(()=>[a(O),T("div",Ve,[T("p",be,u(o(ie)({page:o(m),itemPerPage:o(r)},o(y))),1),a(ne,{modelValue:o(m),"onUpdate:modelValue":t[5]||(t[5]=e=>d(m)?m.value=e:null),length:Math.ceil(o(y)/o(r)),"total-visible":i.$vuetify.display.xs?1:Math.ceil(o(y)/o(r))},{prev:l(e=>[a(D,H({variant:"tonal",color:"default"},e,{icon:!1}),{default:l(()=>[s(" Trước ")]),_:2},1040)]),next:l(e=>[a(D,H({variant:"tonal",color:"default"},e,{icon:!1}),{default:l(()=>[s(" Sau ")]),_:2},1040)]),_:1},8,["modelValue","length","total-visible"])])]),_:1},8,["items-per-page","page","items-length","items"])]),_:1})])):(j(),q("section",ye,[a(C,null,{default:l(()=>[a(ue,null,{default:l(()=>[s("Không tìm thấy hoá đơn!!")]),_:1})]),_:1})]))}}});export{Qe as default};
