import{V as k,r as v}from"./VForm-37c1912f.js";import{d as w,r as s,j as x,o as N,f as U,e as a,b as e,t as T,m as r,b8 as d,bd as $,ah as h,aQ as D}from"./index-3fd149be.js";import{_ as F}from"./AppTextarea.vue_vue_type_script_setup_true_lang-ebcf7f43.js";import{_ as A}from"./AppDateTimePicker.vue_vue_type_style_index_0_lang-fd8a12a0.js";import{_ as B}from"./AppTextField.vue_vue_type_script_setup_true_lang-90e794ca.js";import{$ as R}from"./api-a75dc8d8.js";import{b as S,a as j,V as P}from"./VCard-61c770c5.js";import{V as E,a as u}from"./VRow-c532c0b3.js";import{V as G}from"./VCardText-e03872ea.js";import"./VInput-f0b53b48.js";import"./VImg-358e4210.js";import"./forwardRefs-6ea3df5c.js";import"./VField-51408b73.js";import"./VTextField-2ce7eec1.js";import"./VAvatar-f2d95c46.js";const oe=w({__name:"index",setup(I){const _=s(!1),m=s(),p=s(""),f=s(""),V=s(""),c=s(""),b=s(""),y=x(),q=async()=>{const l=(await R("/api/promotion/create-promotion",{method:"POST",data:{code:p.value,name:f.value,fromDate:c.value,toDate:b.value,description:V.value}})).data;console.log(l.respType==="200"),l.respType===200&&y.replace("/promotion/list")},C=()=>{var o;(o=m.value)==null||o.validate().then(({valid:l})=>{l&&(q(),D(()=>{var i,n;(i=m.value)==null||i.reset(),(n=m.value)==null||n.resetValidation()}))})};return(o,l)=>{const i=B,n=A,g=F;return N(),U(P,{class:"pa-sm-8 pa-5"},{default:a(()=>[e(j,{class:"text-center"},{default:a(()=>[e(S,{class:"text-h3 mb-3"},{default:a(()=>[T(" Thêm chương trình khuyến mãi ")]),_:1})]),_:1}),e(G,null,{default:a(()=>[e(r(k),{ref_key:"refForm",ref:m,modelValue:r(_),"onUpdate:modelValue":l[5]||(l[5]=t=>d(_)?_.value=t:null),onSubmit:$(C,["prevent"])},{default:a(()=>[e(E,null,{default:a(()=>[e(u,{cols:"12",md:"6"},{default:a(()=>[e(i,{modelValue:r(p),"onUpdate:modelValue":l[0]||(l[0]=t=>d(p)?p.value=t:null),rules:["requiredValidator"in o?o.requiredValidator:r(v)],label:o.$t("Code"),placeholder:"TET2024"},null,8,["modelValue","rules","label"])]),_:1}),e(u,{cols:"12",md:"6"},{default:a(()=>[e(i,{modelValue:r(f),"onUpdate:modelValue":l[1]||(l[1]=t=>d(f)?f.value=t:null),rules:["requiredValidator"in o?o.requiredValidator:r(v)],label:"Nhập tên chương trình",placeholder:"Khuyến mãi tết 2024"},null,8,["modelValue","rules"])]),_:1}),e(u,{cols:"12",md:"6"},{default:a(()=>[e(n,{modelValue:r(c),"onUpdate:modelValue":l[2]||(l[2]=t=>d(c)?c.value=t:null),label:"Ngày bắt đầu","clear-icon":"tabler-x",clearable:"",rules:["requiredValidator"in o?o.requiredValidator:r(v)]},null,8,["modelValue","rules"])]),_:1}),e(u,{cols:"12",md:"6"},{default:a(()=>[e(n,{modelValue:r(b),"onUpdate:modelValue":l[3]||(l[3]=t=>d(b)?b.value=t:null),label:"Ngày kết thúc","clear-icon":"tabler-x",clearable:"",rules:["requiredValidator"in o?o.requiredValidator:r(v)]},null,8,["modelValue","rules"])]),_:1}),e(u,{cols:"12",md:"12"},{default:a(()=>[e(g,{modelValue:r(V),"onUpdate:modelValue":l[4]||(l[4]=t=>d(V)?V.value=t:null),label:"Giới thiệu chi tiết",placeholder:"Nhập giới thiệu",rows:"2"},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",class:"d-flex flex-wrap justify-center gap-4"},{default:a(()=>[e(h,{type:"submit",class:"me-3"},{default:a(()=>[T(" Thêm ")]),_:1}),e(h,{type:"reset",variant:"outlined",color:"secondary",to:"list"},{default:a(()=>[T(" Trở lại ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})}}});export{oe as default};
