import{m as Ve,V as le}from"./VTextField-c3064460.js";import{a0 as A,a1 as ce,an as G,a7 as de,w as X,a8 as J,b as v,F as H,q as E,a3 as Q,a4 as C,r as K,d0 as fe,aM as pe,am as Se,a5 as ae,dk as ke,dx as we,dm as be,Z as xe,aP as Ie,E as Pe,cn as Ce,a6 as q,aT as Fe,aC as Te,bi as Me,aw as ne,dq as Z,da as Re,_ as oe,dr as De,t as Le,dX as ue,m as W,dH as Be}from"./index-e6b68dc9.js";import{e as _e}from"./VInput-631c3315.js";import{f as Oe}from"./forwardRefs-6ea3df5c.js";import{m as Ke,e as Ae,V as Ee,a as re}from"./VList-0391a593.js";import{m as He}from"./VImg-b249bafb.js";import{g as Ue,a as ze}from"./VOverlay-12f580cc.js";import{V as Ne}from"./VMenu-cba0e6b4.js";import{V as $e}from"./VCheckboxBtn-d95a6a9f.js";import{V as je}from"./VChip-08f601ae.js";const qe=A({renderless:Boolean,...ce()},"VVirtualScrollItem"),We=G()({name:"VVirtualScrollItem",inheritAttrs:!1,props:qe(),emits:{"update:height":e=>!0},setup(e,r){let{attrs:t,emit:s,slots:i}=r;const{resizeRef:c,contentRect:m}=de(void 0,"border");X(()=>{var o;return(o=m.value)==null?void 0:o.height},o=>{o!=null&&s("update:height",o)}),J(()=>{var o,l;return e.renderless?v(H,null,[(o=i.default)==null?void 0:o.call(i,{itemRef:c})]):v("div",E({ref:c,class:["v-virtual-scroll__item",e.class],style:e.style},t),[(l=i.default)==null?void 0:l.call(i)])})}}),se=-1,ie=1,Qe=A({itemHeight:{type:[Number,String],default:48}},"virtual");function Xe(e,r,t){const s=Q(0),i=Q(e.itemHeight),c=C({get:()=>parseInt(i.value??0,10),set(g){i.value=g}}),m=K(),{resizeRef:o,contentRect:l}=de();fe(()=>{o.value=m.value});const h=pe(),p=new Map;let V=Array.from({length:r.value.length});const a=C(()=>{const g=(!l.value||m.value===document.documentElement?h.height.value:l.value.height)-((t==null?void 0:t.value)??0);return Math.ceil(g/c.value*1.7+1)});function u(g,y){c.value=Math.max(c.value,y),V[g]=y,p.set(r.value[g],y)}function k(g){return V.slice(0,g).reduce((y,x)=>y+(x||c.value),0)}function S(g){const y=r.value.length;let x=0,L=0;for(;L<g&&x<y;)L+=V[x++]||c.value;return x-1}let R=0;function b(){if(!m.value||!l.value)return;const g=l.value.height-56,y=m.value.scrollTop,x=y<R?se:ie,L=S(y+g/2),O=Math.round(a.value/3),z=L-O,N=s.value+O*2-1;x===se&&L<=N?s.value=ae(z,0,r.value.length):x===ie&&L>=N&&(s.value=ae(z,0,r.value.length-a.value)),R=y}function B(g){if(!m.value)return;const y=k(g);m.value.scrollTop=y}const F=C(()=>Math.min(r.value.length,s.value+a.value)),U=C(()=>r.value.slice(s.value,F.value).map((g,y)=>({raw:g,index:y+s.value}))),_=C(()=>k(s.value)),Y=C(()=>k(r.value.length)-k(F.value));return X(()=>r.value.length,()=>{V=Se(r.value.length).map(()=>c.value),p.forEach((g,y)=>{const x=r.value.indexOf(y);x===-1?p.delete(y):V[x]=g})}),{containerRef:m,computedItems:U,itemHeight:c,paddingTop:_,paddingBottom:Y,scrollToIndex:B,handleScroll:b,handleItemResize:u}}const Ye=A({items:{type:Array,default:()=>[]},renderless:Boolean,...Qe(),...ce(),...ke()},"VVirtualScroll"),Ze=G()({name:"VVirtualScroll",props:Ye(),setup(e,r){let{slots:t}=r;const s=we("VVirtualScroll"),{dimensionStyles:i}=be(e),{containerRef:c,handleScroll:m,handleItemResize:o,scrollToIndex:l,paddingTop:h,paddingBottom:p,computedItems:V}=Xe(e,xe(e,"items"));return Ie(()=>e.renderless,()=>{Pe(()=>{var a;c.value=Ue(s.vnode.el,!0),(a=c.value)==null||a.addEventListener("scroll",m)}),Ce(()=>{var a;(a=c.value)==null||a.removeEventListener("scroll",m)})}),J(()=>{const a=V.value.map(u=>v(We,{key:u.index,renderless:e.renderless,"onUpdate:height":k=>o(u.index,k)},{default:k=>{var S;return(S=t.default)==null?void 0:S.call(t,{item:u.raw,index:u.index,...k})}}));return e.renderless?v(H,null,[v("div",{class:"v-virtual-scroll__spacer",style:{paddingTop:q(h.value)}},null),a,v("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:q(p.value)}},null)]):v("div",{ref:c,class:["v-virtual-scroll",e.class],onScroll:m,style:[i.value,e.style]},[v("div",{class:"v-virtual-scroll__container",style:{paddingTop:q(h.value),paddingBottom:q(p.value)}},[a])])}),{scrollToIndex:l}}});function Ge(e,r){const t=Q(!1);let s;function i(o){cancelAnimationFrame(s),t.value=!0,s=requestAnimationFrame(()=>{s=requestAnimationFrame(()=>{t.value=!1})})}async function c(){await new Promise(o=>requestAnimationFrame(o)),await new Promise(o=>requestAnimationFrame(o)),await new Promise(o=>requestAnimationFrame(o)),await new Promise(o=>{if(t.value){const l=X(t,()=>{l(),o()})}else o()})}async function m(o){var p,V;if(o.key==="Tab"&&((p=r.value)==null||p.focus()),!["PageDown","PageUp","Home","End"].includes(o.key))return;const l=(V=e.value)==null?void 0:V.$el;if(!l)return;(o.key==="Home"||o.key==="End")&&l.scrollTo({top:o.key==="Home"?0:l.scrollHeight,behavior:"smooth"}),await c();const h=l.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(o.key==="PageDown"||o.key==="Home"){const a=l.getBoundingClientRect().top;for(const u of h)if(u.getBoundingClientRect().top>=a){u.focus();break}}else{const a=l.getBoundingClientRect().bottom;for(const u of[...h].reverse())if(u.getBoundingClientRect().bottom<=a){u.focus();break}}}return{onListScroll:i,onListKeydown:m}}const Je=A({chips:Boolean,closableChips:Boolean,closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"},eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,menu:Boolean,menuIcon:{type:Fe,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,...Ke({itemChildren:!1})},"Select"),et=A({...Je(),...Te(Ve({modelValue:null,role:"button"}),["validationValue","dirty","appendInnerIcon"]),...He({transition:{component:ze}})},"VSelect"),vt=G()({name:"VSelect",props:et(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,r){let{slots:t}=r;const{t:s}=Me(),i=K(),c=K(),m=K(),o=ne(e,"menu"),l=C({get:()=>o.value,set:n=>{var d;o.value&&!n&&((d=c.value)!=null&&d.Î¨openChildren)||(o.value=n)}}),{items:h,transformIn:p,transformOut:V}=Ae(e),a=ne(e,"modelValue",[],n=>p(n===null?[null]:Z(n)),n=>{const d=V(n);return e.multiple?d:d[0]??null}),u=_e(),k=C(()=>a.value.map(n=>n.value)),S=Q(!1),R=C(()=>l.value?e.closeText:e.openText);let b="",B;const F=C(()=>e.hideSelected?h.value.filter(n=>!a.value.some(d=>d===n)):h.value),U=C(()=>e.hideNoData&&!h.value.length||e.readonly||(u==null?void 0:u.isReadonly.value)),_=K(),{onListScroll:Y,onListKeydown:g}=Ge(_,i);function y(n){e.openOnClear&&(l.value=!0)}function x(){U.value||(l.value=!l.value)}function L(n){var f,P;if(!n.key||e.readonly||u!=null&&u.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(n.key)&&n.preventDefault(),["Enter","ArrowDown"," "].includes(n.key)&&(l.value=!0),["Escape","Tab"].includes(n.key)&&(l.value=!1),n.key==="Home"?(f=_.value)==null||f.focus("first"):n.key==="End"&&((P=_.value)==null||P.focus("last"));const d=1e3;function I(w){const D=w.key.length===1,T=!w.ctrlKey&&!w.metaKey&&!w.altKey;return D&&T}if(e.multiple||!I(n))return;const $=performance.now();$-B>d&&(b=""),b+=n.key.toLowerCase(),B=$;const j=h.value.find(w=>w.title.toLowerCase().startsWith(b));j!==void 0&&(a.value=[j])}function O(n){if(e.multiple){const d=a.value.findIndex(I=>e.valueComparator(I.value,n.value));if(d===-1)a.value=[...a.value,n];else{const I=[...a.value];I.splice(d,1),a.value=I}}else a.value=[n],l.value=!1}function z(n){var d;(d=_.value)!=null&&d.$el.contains(n.relatedTarget)||(l.value=!1)}function N(){var n;S.value&&((n=i.value)==null||n.focus())}function ve(n){S.value=!0}function me(n){if(n==null)a.value=[];else if(ue(i.value,":autofill")||ue(i.value,":-webkit-autofill")){const d=h.value.find(I=>I.title===n);d&&O(d)}else i.value&&(i.value.value="")}return X(l,()=>{if(!e.hideSelected&&l.value&&a.value.length){const n=F.value.findIndex(d=>a.value.some(I=>e.valueComparator(I.value,d.value)));Re&&window.requestAnimationFrame(()=>{var d;n>=0&&((d=m.value)==null||d.scrollToIndex(n))})}}),J(()=>{const n=!!(e.chips||t.chip),d=!!(!e.hideNoData||F.value.length||t["prepend-item"]||t["append-item"]||t["no-data"]),I=a.value.length>0,[$]=le.filterProps(e),j=I||!S.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return v(le,E({ref:i},$,{modelValue:a.value.map(f=>f.props.value).join(", "),"onUpdate:modelValue":me,focused:S.value,"onUpdate:focused":f=>S.value=f,validationValue:a.externalValue,counterValue:a.value.length,dirty:I,class:["v-select",{"v-select--active-menu":l.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":a.value.length,"v-select--selection-slot":!!t.selection},e.class],style:e.style,inputmode:"none",placeholder:j,"onClick:clear":y,"onMousedown:control":x,onBlur:z,onKeydown:L,"aria-label":s(R.value),title:s(R.value)}),{...t,default:()=>v(H,null,[v(Ne,E({ref:c,modelValue:l.value,"onUpdate:modelValue":f=>l.value=f,activator:"parent",contentClass:"v-select__content",disabled:U.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:N},e.menuProps),{default:()=>[d&&v(Ee,{ref:_,selected:k.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:f=>f.preventDefault(),onKeydown:g,onFocusin:ve,onScrollPassive:Y,tabindex:"-1",color:e.itemColor??e.color},{default:()=>{var f,P,w;return[(f=t["prepend-item"])==null?void 0:f.call(t),!F.value.length&&!e.hideNoData&&(((P=t["no-data"])==null?void 0:P.call(t))??v(re,{title:s(e.noDataText)},null)),v(Ze,{ref:m,renderless:!0,items:F.value},{default:D=>{var te;let{item:T,index:M,itemRef:he}=D;const ee=E(T.props,{ref:he,key:M,onClick:()=>O(T)});return((te=t.item)==null?void 0:te.call(t,{item:T,index:M,props:ee}))??v(re,ee,{prepend:ge=>{let{isSelected:ye}=ge;return v(H,null,[e.multiple&&!e.hideSelected?v($e,{key:T.value,modelValue:ye,ripple:!1,tabindex:"-1"},null):void 0,T.props.prependIcon&&v(oe,{icon:T.props.prependIcon},null)])}})}}),(w=t["append-item"])==null?void 0:w.call(t)]}})]}),a.value.map((f,P)=>{var T;function w(M){M.stopPropagation(),M.preventDefault(),O(f)}const D={"onClick:close":w,onMousedown(M){M.preventDefault(),M.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0};return v("div",{key:f.value,class:"v-select__selection"},[n?t.chip?v(De,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:f.title}}},{default:()=>{var M;return[(M=t.chip)==null?void 0:M.call(t,{item:f,index:P,props:D})]}}):v(je,E({key:"chip",closable:e.closableChips,size:"small",text:f.title,disabled:f.props.disabled},D),null):((T=t.selection)==null?void 0:T.call(t,{item:f,index:P}))??v("span",{class:"v-select__selection-text"},[f.title,e.multiple&&P<a.value.length-1&&v("span",{class:"v-select__selection-comma"},[Le(",")])])])})]),"append-inner":function(){var D;for(var f=arguments.length,P=new Array(f),w=0;w<f;w++)P[w]=arguments[w];return v(H,null,[(D=t["append-inner"])==null?void 0:D.call(t,...P),e.menuIcon?v(oe,{class:"v-select__menu-icon",icon:e.menuIcon},null):void 0])}})}),Oe({isFocused:S,menu:l,select:O},i)}}),tt=(e,r,t)=>e==null||r==null?-1:e.toString().toLocaleLowerCase().indexOf(r.toString().toLocaleLowerCase()),mt=A({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function lt(e,r,t){var o;const s=[],i=(t==null?void 0:t.default)??tt,c=t!=null&&t.filterKeys?Z(t.filterKeys):!1,m=Object.keys((t==null?void 0:t.customKeyFilter)??{}).length;if(!(e!=null&&e.length))return s;e:for(let l=0;l<e.length;l++){const[h,p=h]=Z(e[l]),V={},a={};let u=-1;if(r&&!(t!=null&&t.noFilter)){if(typeof h=="object"){const R=c||Object.keys(p);for(const b of R){const B=Be(p,b,p),F=(o=t==null?void 0:t.customKeyFilter)==null?void 0:o[b];if(u=F?F(B,r,h):i(B,r,h),u!==-1&&u!==!1)F?V[b]=u:a[b]=u;else if((t==null?void 0:t.filterMode)==="every")continue e}}else u=i(h,r,h),u!==-1&&u!==!1&&(a.title=u);const k=Object.keys(a).length,S=Object.keys(V).length;if(!k&&!S||(t==null?void 0:t.filterMode)==="union"&&S!==m&&!k||(t==null?void 0:t.filterMode)==="intersection"&&(S!==m||!k))continue}s.push({index:l,matches:{...a,...V}})}return s}function ht(e,r,t,s){const i=K([]),c=K(new Map),m=C(()=>s!=null&&s.transform?W(r).map(l=>[l,s.transform(l)]):W(r));fe(()=>{const l=typeof t=="function"?t():W(t),h=typeof l!="string"&&typeof l!="number"?"":String(l),p=lt(m.value,h,{customKeyFilter:e.customKeyFilter,default:e.customFilter,filterKeys:e.filterKeys,filterMode:e.filterMode,noFilter:e.noFilter}),V=W(r),a=[],u=new Map;p.forEach(k=>{let{index:S,matches:R}=k;const b=V[S];a.push(b),u.set(b.value,R)}),i.value=a,c.value=u});function o(l){return c.value.get(l.value)}return{filteredItems:i,filteredMatches:c,getMatches:o}}export{Ze as V,Je as a,Ge as b,vt as c,mt as m,ht as u};
