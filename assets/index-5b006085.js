import{_ as ee}from"./AppTextField.vue_vue_type_script_setup_true_lang-f0deaab8.js";import{_ as te}from"./AppCombobox.vue_vue_type_script_setup_true_lang-f22736af.js";import{_ as ae}from"./AppSelect.vue_vue_type_script_setup_true_lang-08bb88c8.js";import{$ as z}from"./api-8aa897ed.js";import{V as le,p as oe,a as ie,c as se}from"./VPagination-1b632160.js";import{u as ne}from"./useApi-2ff97c0c.js";import{V as L}from"./VCardText-d5308dd5.js";import{V as re,a as k}from"./VRow-87298a75.js";import{V as w,b as me}from"./VCard-9396c329.js";import{V as ue}from"./VSpacer-64191451.js";import{d as de,r as s,d3 as M,a4 as j,w as q,m as l,o as F,c as O,b as a,e as o,b8 as u,n as f,ah as U,t as m,v,_ as H,q as K,a as pe}from"./index-e5a9fd81.js";import{V as Q}from"./VDivider-60c6764f.js";import{V as ce}from"./VChip-f222b406.js";import"./VInput-8103d796.js";import"./VImg-f4bf07e7.js";import"./VTextField-608370b1.js";import"./VField-72e718fc.js";import"./forwardRefs-6ea3df5c.js";import"./filter-1812ac2f.js";import"./VList-39dfda66.js";import"./VAvatar-80d2bcda.js";import"./VOverlay-59011a41.js";import"./lazy-21d716b8.js";import"./VMenu-5e35b860.js";import"./VCheckboxBtn-3e04527a.js";import"./VSelectionControl-2a16a0ab.js";import"./VTable-043318a7.js";import"./index-f220d054.js";const fe={key:0},ve={class:"me-3 d-flex gap-3 align-center"},_e={class:"d-flex align-center flex-wrap gap-4"},ge={class:"invoice-list-filter"},Ve={class:"invoice-list-filter"},ye={class:"d-flex align-center justify-sm-space-between justify-center flex-wrap gap-3 pa-5 pt-3"},he={class:"text-sm text-disabled mb-0"},xe={key:1},Xe=de({__name:"index",async setup(be){let c,V;const b=s(""),d=s(""),_=s(),g=s(),B=s(),N=s(),n=s(10),r=s(1),P=s(),S=s(),T=s([]),G=i=>{var t,p;r.value=i.page,P.value=(t=i.sortBy[0])==null?void 0:t.order,S.value=(p=i.sortBy[0])==null?void 0:p.key},J=[{title:"Code",key:"code"},{title:"Điểm khởi hành",key:"from.fullName"},{title:"Điểm đến",key:"to.fullName"},{title:"Thời gian chạy",key:"transferTime"},{title:"Trạng thái",key:"status"},{title:"Hành động",key:"actions",sortable:!1}],$=[{title:"Active",value:1},{title:"Inactive",value:0}],{data:I,execute:W}=([c,V]=M(()=>ne(se("api/route/find",{query:{status:d,fromId:B,toId:N,itemPerPage:n,page:r.value-1,sortBy:P,orderBy:S}}))),c=await c,V(),c),R=j(()=>I.value.valueReponse.data.content),y=j(()=>I.value.valueReponse.data.totalElements),A=i=>{const t=i;if(t===1)return{color:"success",value:"active"};if(t===0)return{color:"secondary",value:"inactive"}};q(_,()=>{var i;return B.value=(i=_.value)==null?void 0:i.value}),q(g,()=>{var i;return N.value=(i=g.value)==null?void 0:i.value});const X=async i=>{await z(`api/route/delete/${i}`,{method:"DELETE"}),W()};async function Y(i,t){const h=(await z("api/region/find",{method:"POST",data:{parentId:i,regionStructureId:t}})).data.valueReponse.data;T.value=h.map(x=>({value:x.id,title:x.fullName}))}[c,V]=M(()=>Y(null,1)),await c,V();function Z(i){return new Date(`2000-01-01T${i}`).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}return(i,t)=>{const p=ae,h=te,x=ee,D=pe("IconBtn");return l(R)?(F(),O("section",fe,[a(w,{title:"Bộ lọc",class:"mb-6"},{default:o(()=>[a(l(L),null,{default:o(()=>[a(re,null,{default:o(()=>[a(k,{cols:"12",md:"4"},{default:o(()=>[a(p,{modelValue:l(d),"onUpdate:modelValue":t[0]||(t[0]=e=>u(d)?d.value=e:null),label:"Chọn trạng thái",placeholder:"Chọn trạng thái",clearable:"","clear-icon":"tabler-x",items:$},null,8,["modelValue"])]),_:1}),a(k,{cols:"12",md:"4"},{default:o(()=>[a(h,{modelValue:l(_),"onUpdate:modelValue":t[1]||(t[1]=e=>u(_)?_.value=e:null),items:l(T),label:"Điểm khởi hành","item-value":"value"},null,8,["modelValue","items"])]),_:1}),a(k,{cols:"12",md:"4"},{default:o(()=>[a(h,{modelValue:l(g),"onUpdate:modelValue":t[2]||(t[2]=e=>u(g)?g.value=e:null),items:l(T),label:"Điểm đến"},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1})]),_:1}),a(w,{id:"invoice-list"},{default:o(()=>[a(l(L),{class:"d-flex align-center flex-wrap gap-4"},{default:o(()=>[f("div",ve,[a(p,{"model-value":l(n),items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"Tất cả"}],style:{"inline-size":"8rem"},"onUpdate:modelValue":t[3]||(t[3]=e=>n.value=parseInt(e,10))},null,8,["model-value"])]),a(ue),f("div",_e,[f("div",ge,[a(x,{modelValue:l(b),"onUpdate:modelValue":t[4]||(t[4]=e=>u(b)?b.value=e:null),placeholder:"Tìm kiếm",density:"compact"},null,8,["modelValue"])]),f("div",Ve,[a(p,{modelValue:l(d),"onUpdate:modelValue":t[5]||(t[5]=e=>u(d)?d.value=e:null),placeholder:"Chọn trạng thái",clearable:"","clear-icon":"tabler-x","single-line":"",items:$},null,8,["modelValue"])]),a(U,{"prepend-icon":"tabler-plus",to:"add"},{default:o(()=>[m(" Thêm tuyến đường ")]),_:1})])]),_:1}),a(Q),a(l(le),{"items-per-page":l(n),"onUpdate:itemsPerPage":t[7]||(t[7]=e=>u(n)?n.value=e:null),page:l(r),"onUpdate:page":t[8]||(t[8]=e=>u(r)?r.value=e:null),"items-length":l(y),items:l(R),headers:J,class:"text-no-wrap","onClick:row":t[9]||(t[9]=e=>console.log(e)),"onUpdate:options":G},{"item.code":o(({item:e})=>[m(v(e.code),1)]),"item.from.fullName":o(({item:e})=>[m(v(e.from.fullName),1)]),"item.to.fullName":o(({item:e})=>[m(v(e.to.fullName),1)]),"item.transferTime":o(({item:e})=>[m(v(Z(e.transferTime)),1)]),"item.status":o(({item:e})=>{var C;return[a(ce,{color:(C=A(e.status))==null?void 0:C.color,size:"small",label:"",class:"text-capitalize"},{default:o(()=>{var E;return[m(v((E=A(e.status))==null?void 0:E.value),1)]}),_:2},1032,["color"])]}),"item.actions":o(({item:e})=>[a(D,{onClick:C=>X(e.id)},{default:o(()=>[a(H,{icon:"tabler-trash"})]),_:2},1032,["onClick"]),a(D,{to:{name:"promotion-edit-id",params:{id:e.id}}},{default:o(()=>[a(H,{icon:"tabler-edit"})]),_:2},1032,["to"])]),bottom:o(()=>[a(Q),f("div",ye,[f("p",he,v(l(oe)({page:l(r),itemPerPage:l(n)},l(y))),1),a(ie,{modelValue:l(r),"onUpdate:modelValue":t[6]||(t[6]=e=>u(r)?r.value=e:null),length:Math.ceil(l(y)/l(n)),"total-visible":i.$vuetify.display.xs?1:Math.ceil(l(y)/l(n))},{prev:o(e=>[a(U,K({variant:"tonal",color:"default"},e,{icon:!1}),{default:o(()=>[m(" Trước ")]),_:2},1040)]),next:o(e=>[a(U,K({variant:"tonal",color:"default"},e,{icon:!1}),{default:o(()=>[m(" Sau ")]),_:2},1040)]),_:1},8,["modelValue","length","total-visible"])])]),_:1},8,["items-per-page","page","items-length","items"])]),_:1})])):(F(),O("section",xe,[a(w,null,{default:o(()=>[a(me,null,{default:o(()=>[m("Không tìm thấy hoá đơn!!")]),_:1})]),_:1})]))}}});export{Xe as default};
