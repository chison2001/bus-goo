import{V as k,r as v}from"./VForm-37c1912f.js";import{d as F,r as m,j as R,d3 as S,o as U,f as $,e as l,b as a,t as T,m as r,b8 as f,bd as A,ah as C,aQ as B}from"./index-3fd149be.js";import{_ as I}from"./AppDateTimePicker.vue_vue_type_style_index_0_lang-fd8a12a0.js";import{_ as N}from"./AppCombobox.vue_vue_type_script_setup_true_lang-c1d9498f.js";import{$ as g}from"./api-a75dc8d8.js";import{b as P,a as j,V as O}from"./VCard-61c770c5.js";import{V as D,a as c}from"./VRow-c532c0b3.js";import{V as H}from"./VCardText-e03872ea.js";import"./VInput-f0b53b48.js";import"./VImg-358e4210.js";import"./forwardRefs-6ea3df5c.js";import"./VField-51408b73.js";import"./filter-63c6ab32.js";import"./VTextField-2ce7eec1.js";import"./VList-f267fd1b.js";import"./VAvatar-f2d95c46.js";import"./VDivider-28142714.js";import"./VOverlay-159aff9b.js";import"./lazy-b75e2264.js";import"./VMenu-277f5fe7.js";import"./VCheckboxBtn-cc8088ff.js";import"./VSelectionControl-28aa5ef1.js";import"./VChip-259eb5bf.js";const pe=F({__name:"index",async setup(M){let b,y;const V=m(!1),d=m(),n=m(""),u=m(),p=m(),_=m([]),h=R(),w=async()=>{const e=(await g("api/route/create",{method:"POST",data:{fromId:u.value.value,toId:p.value.value,transferTime:n.value}})).data;console.log(e.respType==="200"),e.respType===200&&h.replace("/route/list")},x=()=>{var t;(t=d.value)==null||t.validate().then(({valid:e})=>{e&&(w(),B(()=>{var s,i;(s=d.value)==null||s.reset(),n.value="",(i=d.value)==null||i.resetValidation()}))})};async function q(t,e){const i=(await g("/api/region/find",{method:"POST",data:{parentId:t,regionStructureId:e}})).data.valueReponse.data;_.value=i.map(o=>({value:o.id,title:o.fullName}))}return[b,y]=S(()=>q(null,1)),await b,y(),(t,e)=>{const s=N,i=I;return U(),$(O,{class:"pa-sm-8 pa-5"},{default:l(()=>[a(j,{class:"text-center"},{default:l(()=>[a(P,{class:"text-h3 mb-3"},{default:l(()=>[T(" Thêm tuyến đường ")]),_:1})]),_:1}),a(H,null,{default:l(()=>[a(r(k),{ref_key:"refForm",ref:d,modelValue:r(V),"onUpdate:modelValue":e[3]||(e[3]=o=>f(V)?V.value=o:null),onSubmit:A(x,["prevent"])},{default:l(()=>[a(D,null,{default:l(()=>[a(c,{cols:"12",md:"6"},{default:l(()=>[a(s,{modelValue:r(u),"onUpdate:modelValue":e[0]||(e[0]=o=>f(u)?u.value=o:null),items:r(_),label:"Điểm khởi hành",rules:["requiredValidator"in t?t.requiredValidator:r(v)]},null,8,["modelValue","items","rules"])]),_:1}),a(c,{cols:"12",md:"6"},{default:l(()=>[a(s,{modelValue:r(p),"onUpdate:modelValue":e[1]||(e[1]=o=>f(p)?p.value=o:null),items:r(_),label:"Điểm đến",rules:["requiredValidator"in t?t.requiredValidator:r(v)]},null,8,["modelValue","items","rules"])]),_:1}),a(c,{cols:"12",md:"6"},{default:l(()=>[a(i,{modelValue:r(n),"onUpdate:modelValue":e[2]||(e[2]=o=>f(n)?n.value=o:null),label:"Thời gian chạy",config:{enableTime:!0,noCalendar:!0,dateFormat:"H:i"},"clear-icon":"tabler-x",clearable:"",rules:["requiredValidator"in t?t.requiredValidator:r(v)]},null,8,["modelValue","rules"])]),_:1}),a(c,{cols:"12",class:"d-flex flex-wrap justify-center gap-4"},{default:l(()=>[a(C,{type:"submit",class:"me-3"},{default:l(()=>[T(" Thêm ")]),_:1}),a(C,{type:"reset",variant:"outlined",color:"secondary",to:"list"},{default:l(()=>[T(" Trở lại ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})}}});export{pe as default};
